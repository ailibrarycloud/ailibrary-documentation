export const metadata = {
  title: 'Files',
  description:
    'Manage your files and knowledge sources.',
}

# Files

Functions to support your AI Agents. {{ className: 'lead' }}

---

## Upload Files {{ tag: 'POST', label: '/v1/files' }}

<Row>
  <Col>

    Searches the web for search terms

    ### form-data

    <Properties>
      <Property name="files" type="file" required="true">
        List of files
      </Property>
       <Property name="knowledgeId" type="string">
        Knowledge base ID to add the files to a knowledge base. The file is uploaded to 'home' folder.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="POST" label="/v1/files">

    ```python 
    files=[
        ('files',('file1.pdf',open('/path/to/file1.pdf','rb'),'application/pdf')),
        ('files',('files2.pdf',open('/path/to/file2.pdf','rb'),'application/pdf'))
    ]

    response = requests.request("POST", url, headers=headers, files=files)
    ```
    ```javascript
    const axios = require('axios');
    const FormData = require('form-data');
    const fs = require('fs');
    let data = new FormData();
    data.append('files', fs.createReadStream('/path/to/file1.pdf'));
    data.append('files', fs.createReadStream('/path/to/file2.pdf'));

    let config = {
        method: 'post',
        maxBodyLength: Infinity,
        url: 'https://api.ailibrary.ai/v1/files',
        headers: { 
            'X-Library-Key': '••••••', 
            ...data.getHeaders()
        },
        data : data
    };

    async function makeRequest() {
        try {
            const response = await axios.request(config);
            console.log(JSON.stringify(response.data));
        }
        catch (error) {
            console.log(error);
        }
    }

    makeRequest();
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    [
        {
            "url": "https://ailib-public.s3-us-west-2.amazonaws.com/corbett/arani@ailibrary.ai/file1.pdf",
            "id": 2345
        }
    ]
    ```

  </Col>
</Row>

---

## List Files {{ tag: 'GET', label: '/v1/files' }}

<Row>
  <Col>

    Retrieves a list of all files.

    ### Request parameters

    <Properties>
      <Property name="page" type="string">
        Page number
      </Property>
      <Property name="limit" type="string">
        Number of items per page
        </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/files">

    ```python 
    import requests

    url = "https://api.ailibrary.ai/v1/files?page=1"
    headers = {
        'X-Library-Key': '••••••'
    }

    response = requests.request("GET", url, headers=headers)
    ```
    ```javascript
    const axios = require('axios');

    let config = {
        method: 'get',
        maxBodyLength: Infinity,
        url: 'https://api.ailibrary.ai/v1/files?page=1',
        headers: { 
            'X-Library-Key': '••••••'
        }
    };
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "files": [
          {
              "bytes": 9505,
              "created_timestamp": "2024-12-10 05:18:49",
              "id": 2573,
              "name": "file_1.csv",
              "url": "https://ailib-public.s3-us-west-2.amazonaws.com/you@domain.ai/file_1.csv"
          },
          {
              "bytes": 9505,
              "created_timestamp": "2024-12-10 05:18:49",
              "id": 2573,
              "name": "file_2.csv",
              "url": "https://ailib-public.s3-us-west-2.amazonaws.com/you@domain.ai/file_2.csv"
          },
          /// ...
      ],
      "meta": {
          "limit": 10,
          "next_page": 3,
          "prev_page": 1,
          "total_items": 1037
      }
    }
    ```

  </Col>
</Row>

---

## Retrieve a file {{ tag: 'GET', label: '/v1/files/{fileId}' }}

<Row>
  <Col>

    Retrieves a file by ID.

    ### Request parameters

    <Properties>
      <Property name="fileId" type="string"  required="true">
        ID of the file
      </Property>
    </Properties>


  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/files/{fileId}">

    ```python 
    import requests

    url = "https://api.ailibrary.ai/v1/files/{fileId}"
    headers = {
        'X-Library-Key': '••••••'
    }

    response = requests.request("GET", url, headers=headers)
    ```
    ```javascript
    const axios = require('axios');

    let config = {
        method: 'get',
        maxBodyLength: Infinity,
        url: 'https://api.ailibrary.ai/v1/files/{fileId}',
        headers: { 
            'X-Library-Key': '••••••'
        }
    };
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
        "bytes": 9505,
        "created_timestamp": "2024-12-10 05:18:49",
        "id": 2573,
        "name": "file_1.csv",
        "url": "https://ailib-public.s3-us-west-2.amazonaws.com/you@domain.ai/file_1.csv"
    }
    ```

  </Col>
</Row>

---

## Delete a file {{ tag: 'DELETE', label: '/v1/files/{fileId}' }}

<Row>
  <Col>

    Delete a file by ID.

    Note: Deleting a file does not remove it from knowledge bases. If you want to remove a file from a knowledge base, use the [Delete Sources](/api-reference/knowledgebase#delete-sources) endpoint.

    ### Request parameters

    <Properties>
      <Property name="fileId" type="string" required="true">
        ID of the file
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="DELETE" label="/v1/files/{fileId}">

    ```python 
    import requests

    url = "https://api.ailibrary.ai/v1/files/{fileId}"
    headers = {
        'X-Library-Key': '••••••'
    }

    response = requests.request("DELETE", url, headers=headers)
    ```
    ```javascript
    const axios = require('axios');

    let config = {
        method: 'DELETE',
        maxBodyLength: Infinity,
        url: 'https://api.ailibrary.ai/v1/files/{fileId}',
        headers: { 
            'X-Library-Key': '••••••'
        }
    };
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
        "response": "Record successfully deleted"
    }
    ```

  </Col>
</Row>
